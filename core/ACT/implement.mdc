# ACT 模式 - 实现工作流程

> 系统化的代码实现指南

---

## 工作流程

### 阶段 1：需求确认

**目标：** 确保完全理解需求

**步骤：**
1. 仔细阅读需求
2. 识别关键功能点
3. 列出假设和约束
4. **提出澄清问题**（如有疑问）

---

### 阶段 2：设计方案

**目标：** 制定清晰的实现计划

**步骤：**
1. **分析现有代码结构**
   - 查看项目记忆（`project-memory.mdc`）
   - 了解技术栈和架构
   
2. **设计模块化方案**
   - 识别需要创建/修改的文件
   - 规划组件/函数/类结构
   - 考虑代码复用

3. **确定实现顺序**
   - 从核心功能开始
   - 逐步添加辅助功能
   - 保持每步可测试

---

### 阶段 3：增量实现

**目标：** 小步骤迭代，持续测试

**原则：**
- ✅ **一次一个功能** - 不要一次做太多
- ✅ **先核心后边缘** - 优先实现关键路径
- ✅ **即时测试** - 每完成一个功能立即测试
- ✅ **提交小** - 频繁提交可工作的代码

**步骤：**
1. 实现第一个功能
2. 编写/运行测试
3. 确认工作正常
4. 重复直到完成

---

### 阶段 4：质量保证

**目标：** 确保代码质量

**检查清单：**
- [ ] 代码符合项目规范
- [ ] 所有函数有文档字符串
- [ ] 测试覆盖核心功能
- [ ] 无明显性能问题
- [ ] 错误处理完善
- [ ] 日志记录适当

---

### 阶段 5：文档更新

**目标：** 自动更新项目文档

**必须更新：**
1. **`project-memory.mdc`** - 记录重要决策
2. **`tasks/active_context.md`** - 更新当前状态
3. **`tasks/tasks_plan.md`** - 标记任务完成
4. **代码注释** - 解释复杂逻辑

---

## 最佳实践

### 代码质量

1. **遵循 SOLID 原则**
   - 单一职责
   - 开放封闭
   - 里氏替换
   - 接口隔离
   - 依赖倒置

2. **保持简洁**
   - 函数不超过 50 行
   - 类不超过 300 行
   - 避免深层嵌套（最多 3 层）

3. **命名清晰**
   - 变量名描述性强
   - 函数名动词开头
   - 类名名词形式

### 测试策略

1. **单元测试**
   - 测试单个函数/方法
   - 覆盖边界情况
   - 使用 mock 隔离依赖

2. **集成测试**
   - 测试模块协作
   - 验证数据流
   - 检查副作用

3. **测试驱动开发（TDD）**
   - 先写测试
   - 实现功能
   - 重构优化

---

## 常见问题处理

### 遇到阻塞时

1. **重新审视需求** - 是否理解正确？
2. **简化问题** - 能否分解成更小的步骤？
3. **查看文档** - 项目记忆中有类似案例吗？
4. **寻求帮助** - 向用户请求澄清

### 发现 Bug 时

1. **不要继续添加功能** - 先修复 Bug
2. **添加测试** - 防止回归
3. **记录教训** - 更新项目记忆

---

## 完成标准

实现完成的标志：
- ✅ 所有功能按需求工作
- ✅ 测试全部通过
- ✅ 代码已审查（自我审查）
- ✅ 文档已更新
- ✅ 无明显技术债

---

**更新日期**: 2025-11-04
