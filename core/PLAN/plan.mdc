# PLAN 模式 - 规划工作流程

> 系统化的需求分析和方案设计

---

## 规划流程

### 阶段 1：需求澄清

**目标：** 完全理解用户需求

**步骤：**
1. **仔细阅读需求**
   - 识别核心目标
   - 理解使用场景
   - 注意约束条件

2. **提出澄清问题**
   - 不明确的需求
   - 潜在的边界情况
   - 性能/安全要求
   - 用户体验期望

3. **确认假设**
   - 明确列出所有假设
   - 与用户确认假设是否正确

---

### 阶段 2：探索方案

**目标：** 穷举可能的解决方案

**步骤：**
1. **分析现有资源**
   - 查看项目记忆和架构
   - 了解现有代码库
   - 识别可复用组件

2. **头脑风暴**
   - 列出所有可能的实现方式
   - 不要过早排除任何方案
   - 考虑多种技术路线

3. **研究最佳实践**
   - 查看相关文档
   - 参考行业标准
   - 学习成熟方案

---

### 阶段 3：方案评估

**目标：** 选择最优方案

**评估维度：**
1. **可行性**
   - 技术可行性
   - 资源可用性
   - 时间限制

2. **质量**
   - 代码可维护性
   - 性能表现
   - 安全性

3. **成本**
   - 开发时间
   - 技术债务
   - 未来扩展性

**选择标准：**
- ✅ 满足所有功能需求
- ✅ 符合项目技术栈
- ✅ 代码简洁易维护
- ✅ 性能满足要求
- ✅ 便于测试

---

### 阶段 4：详细设计

**目标：** 制定完整的实施计划

**输出内容：**

1. **架构设计**
   - 模块划分
   - 组件关系
   - 数据流向

2. **技术选型**
   - 使用的技术/库
   - 选择理由
   - 替代方案

3. **实施步骤**
   - 任务分解
   - 实施顺序
   - 里程碑设置

4. **测试策略**
   - 测试覆盖范围
   - 测试工具
   - 验收标准

---

### 阶段 5：用户确认

**目标：** 获得用户批准

**确认内容：**
1. **方案概述**
   - 清晰说明选择的方案
   - 解释关键设计决策
   - 阐述优势和权衡

2. **实施计划**
   - 主要任务和时间估算
   - 关键里程碑
   - 风险和缓解措施

3. **确认假设**
   - 重申所有假设
   - 确认用户理解和同意

4. **获得批准**
   - 等待用户反馈
   - 根据反馈调整方案
   - 获得明确的继续许可

---

## 规划原则

### 1. 全面思考

- 考虑所有可能的方向
- 不要遗漏边界情况
- 预见潜在问题

### 2. 严谨推理

- 逻辑清晰
- 论据充分
- 结论可靠

### 3. 用户导向

- 以用户需求为核心
- 保持沟通透明
- 及时反馈进展

### 4. 文档先行

- 记录所有决策
- 说明决策理由
- 便于未来追溯

---

## 输出模板

### 规划文档结构

```markdown
# [功能名称] 实施方案

## 1. 需求理解
- 核心目标：
- 使用场景：
- 约束条件：

## 2. 方案对比
### 方案 A
- 描述：
- 优点：
- 缺点：

### 方案 B
- 描述：
- 优点：
- 缺点：

## 3. 推荐方案
- 选择：方案 X
- 理由：
- 风险：

## 4. 实施计划
- 步骤 1：
- 步骤 2：
- 步骤 3：

## 5. 测试策略
- 单元测试：
- 集成测试：
- 验收标准：

## 6. 需要确认的问题
1. 
2. 
```

---

## 最佳实践

### ✅ 推荐做法

1. **充分沟通** - 多问问题，确保理解正确
2. **全面分析** - 考虑多个方案，不要急于下结论
3. **详细记录** - 记录思考过程和决策依据
4. **用户验证** - 及时获得用户反馈和确认

### ❌ 避免做法

1. **仓促决策** - 在充分分析前就选择方案
2. **假设过多** - 未确认的假设会导致返工
3. **缺少文档** - 决策过程未记录
4. **忽视用户** - 自行决定不征求用户意见

---

**更新日期**: 2025-11-04
